<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="generator" content="mkdocs-1.6.0, mkdocs-terminal-4.4.0">
     
     
    <link rel="icon" type="image/png" sizes="192x192" href="../../../../img/android-chrome-192x192.png" />
<link rel="icon" type="image/png" sizes="512x512" href="../../../../img/android-chrome-512x512.png" />
<link rel="apple-touch-icon" sizes="180x180" href="../../../../img/apple-touch-icon.png" />
<link rel="shortcut icon" type="image/png" sizes="48x48" href="../../../../img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="../../../../img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="../../../../img/favicon-32x32.png" />


    
 
<title>Exercice 0 - Alexandros Singh's Academic Homepage</title>


<link href="../../../../css/fontawesome/css/fontawesome.min.css" rel="stylesheet">
<link href="../../../../css/fontawesome/css/solid.min.css" rel="stylesheet">
<link href="../../../../css/normalize.css" rel="stylesheet">
<link href="../../../../css/terminal.css" rel="stylesheet">
<link href="../../../../css/theme.css" rel="stylesheet">
<link href="../../../../css/theme.tile_grid.css" rel="stylesheet">
<link href="../../../../css/theme.footer.css" rel="stylesheet">
<!-- default color palette -->
<link href="../../../../css/palettes/default.css" rel="stylesheet">

<!-- page layout -->
<style>
/* initially set page layout to a one column grid */
.terminal-mkdocs-main-grid {
    display: grid;
    grid-column-gap: 1.4em;
    grid-template-columns: auto;
    grid-template-rows: auto;
}

/*  
*   when side navigation is not hidden, use a two column grid.  
*   if the screen is too narrow, fall back to the initial one column grid layout.
*   in this case the main content will be placed under the navigation panel. 
*/
@media only screen and (min-width: 70em) {
    .terminal-mkdocs-main-grid {
        grid-template-columns: 4fr 9fr;
    }
}</style>

<!-- cursor_animation override -->
<style>
  #mkdocs-terminal-site-name.terminal-prompt::after {
      display: none;
  }
</style>

    
    <link href="../../../../style.css" rel="stylesheet">  
    
    

    
    
    
    
    
    <script src="../../../../javascripts/mathjax.js"></script>
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script src="../../../../javascripts/calc_parse_to_adt.js"></script>
    
    <script src="../../../../javascripts/calc_evaluate.js"></script>
    
    <script src="../../../../javascripts/calc_evaluate_2.js"></script>
    

    
</head>

<body class="terminal"><div class="container">
    <div class="terminal-nav">
        <header class="terminal-logo">
            <div id="mkdocs-terminal-site-name" class="logo terminal-prompt"><a href="/" class="no-style">Alexandros Singh's Academic Homepage</a></div>
        </header>
        
        <nav class="terminal-menu">
            
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../.." class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Home</span>
                    </a>
                    <meta property="position" content="0">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../../pubs/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Papers</span>
                    </a>
                    <meta property="position" content="1">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../../talks/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Talks</span>
                    </a>
                    <meta property="position" content="2">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../../software/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Software</span>
                    </a>
                    <meta property="position" content="3">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../../gallery/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Gallery</span>
                    </a>
                    <meta property="position" content="4">
                </li>
                
                
                <li property="itemListElement" typeof="ListItem">
                    <a href="../../../../comte/" class="menu-item " property="item" typeof="WebPage">
                        <span property="name">Project CoMTE</span>
                    </a>
                    <meta property="position" content="5">
                </li>
                
                
                
                    
                    
                    
            </ul>
            
        </nav>
    </div>
</div>
        
    <div class="container">
        <div class="terminal-mkdocs-main-grid"><aside id="terminal-mkdocs-side-panel"><nav>
  
    <ul class="terminal-mkdocs-side-nav-items">
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../..">Home</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../../pubs/">Papers</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../../talks/">Talks</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../../software/">Software</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../../gallery/">Gallery</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../../comte/">Project CoMTE</a>
        
    
    
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        
            
                
        

        
            
    
        
        
            
            
            <span class="
        
            
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">Teaching</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../teaching/">Overview</a>
        
    
    </li>
            
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../mpif/mpif/">Mathématiques pour l’informatique et les jeux vidéo</a>
        
    
    </li>
            
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../funProg/funProg/">Programmation fonctionnelle</a>
        
    
    </li>
            
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../advFunProg/advFunProg/">Programmation fonctionnelle avancée</a>
        
    
    </li>
            
        
            
            
                
                
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../old/pastYears/">Past years</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
    </ul>
  
</nav><hr>
<nav>
    <ul>
        <li><a href="#exercice-0">Exercice 0</a></li>
        <li><a href="#exercice-1">Exercice 1</a></li>
        <li><a href="#exercice-2-utilisation-de-la-monade-maybe-avec-des-listes">Exercice 2 : Utilisation de la monade Maybe avec des listes</a></li>
        <li><a href="#exercice-3-utilisation-de-la-monade-maybe-avec-les-arbres">Exercice 3 : Utilisation de la monade Maybe avec les arbres</a></li>
        <li><a href="#devoir-a-rendre-avant-le-29-octobre-2023-23h59-heure-de-paris">Devoir à rendre avant le 29 octobre 2023, 23h59, heure de Paris:</a></li>
    </ul>
</nav>
</aside>
            <main id="terminal-mkdocs-main-content">
<section id="mkdocs-terminal-content">
    <h1 id="exercice-0">Exercice 0</h1>
<p>Le but de ce premier exercice est de vous familiariser avec l'implémentation
(basée sur le type <code>option</code>) de la monade Maybe présentée pendant le cours :
<div class="highlight"><pre><span></span><code>module type Monad = sig
  type &#39;a t
  val return : &#39;a -&gt; &#39;a t
  val ( &gt;&gt;= ) : &#39;a t -&gt; (&#39;a -&gt; &#39;b t) -&gt; &#39;b t
end

module Maybe : Monad with type &#39;a t = &#39;a option = struct 
    type &#39;a t = &#39;a option 

    let return x = Some x 

    let ( &gt;&gt;= ) m f = match m with 
        | None -&gt; None 
        | Some x -&gt; f x
end 
</code></pre></div></p>
<p>-Problème 0 : En utilisant la monade Maybe, implémentez le premier exemple que
nous avons vu pendant le cours : une fonction <code>nth_to_str : int -&gt; int list -&gt; string
option</code> qui prend en entrée une liste <code>l</code> et une valeur entière <code>n</code> et
retourne soit :</p>
<ol>
<li>
<p>Une valeur <code>Some s</code> où <code>s</code> est la représentation en chaîne du <code>n</code>-ème
   élément de la liste (s'il existe).</p>
</li>
<li>
<p>Ou <code>None</code> si ce n'est pas le cas.</p>
</li>
</ol>
<p>La fonction <code>nth_to_str</code> doit utiliser les deux fonctions suivantes vues pendant le cours :</p>
<p><div class="highlight"><pre><span></span><code>let nth_t l n = 
    if n &lt; 0 then None else
    let rec nth_aux l n =
        match l with
            | [] -&gt; None 
            | a::l -&gt; if n = 0 then Some a else nth_aux l (n-1)
    in nth_aux l n

let str_of_int_m x = string_of_int x |&gt; return 
</code></pre></div>
Exemples de résultats attendus :
<div class="highlight"><pre><span></span><code># nth_to_str [1;2;3;4;5] 3;;
- : string option = Some &quot;4&quot;
# nth_to_str [1;2;3;4;5] 5;;
- : string option = None
# nth_to_str [1;2;3;4;5] (-1);;
- : string option = None
</code></pre></div></p>
<p>-Problème 1 : Implémentez une fonction <code>nth_to_pretty_string : int -&gt; int list
-&gt; string option</code> qui retourne soit :</p>
<ol>
<li>
<p>Si l'index fourni est valide : une valeur <code>Some s</code> où <code>s</code> est de la
   forme <code>The element at index *n* is *e*</code> avec <code>*n*</code> et <code>*e*</code> la chaîne de
   représentant l'indice et de la valeur correspondante, respectivement.</p>
</li>
<li>
<p>Si ce n'est pas le cas : <code>None</code>.
Exemples de résultats attendus :
<div class="highlight"><pre><span></span><code># nth_to_pretty_str [1;2;3] 0;;
- : string option = Some &quot;The element at index 0 is: 1&quot;
# nth_to_pretty_str [1;2;3] 1;;
- : string option = Some &quot;The element at index 1 is: 2&quot;
# nth_to_pretty_str [1;2;3] 2;;
- : string option = Some &quot;The element at index 2 is: 3&quot;
# nth_to_pretty_str [1;2;3] 3;;
- : string option = None
# nth_to_pretty_str [1;2;3] (-1);;
- : string option = None
</code></pre></div></p>
</li>
</ol>
<h1 id="exercice-1">Exercice 1</h1>
<p>-Problème 0 : Implémentez une fonction <code>comb_opt : 'a list -&gt; 'b list -&gt; ('a *
'b) list option</code> qui, lorsqu'on lui donne deux listes <code>l, k</code>, retourne :</p>
<ol>
<li>
<p>Si les deux listes d'entrée sont de même taille, <code>Some r</code> où <code>r</code> est une
   liste dont le n-ième élément est un tuple constitué des n-ième éléments de
   <code>l</code> et <code>k</code> respectivement.</p>
</li>
<li>
<p>Si ce n'est pas le cas, <code>None</code>.</p>
</li>
</ol>
<p>Exemples de résultats attendus :
<div class="highlight"><pre><span></span><code># comb_opt [1;2;3] [4;5;6];;
- : (int * int) list option = Some [(1, 4); (2, 5); (3, 6)]
# comb_opt [1;2;3;4] [5;6;7];;
- : (int * int) list option = None
</code></pre></div></p>
<p>-Problème 1 : Implémentez une fonction <code>print_combined : int list -&gt; int list
-&gt; unit list option</code> qui prend comme arguments deux listes <code>l, k</code> d'entiers
et fait ce qui suit :</p>
<ol>
<li>
<p>Si les deux listes sont de la même taille, disons <span class="arithmatex">\(\ell\)</span>, elle imprime
   <span class="arithmatex">\(\ell\)</span> lignes, dont chacune est du format <code>a &lt;-&gt; b</code> où <code>a</code> et <code>b</code> sont
   définis en fonction du numéro de ligne : pour la <span class="arithmatex">\(n\)</span>-ième ligne (<span class="arithmatex">\(1 \leq n
   \leq \ell\)</span>), <code>a</code> est le <span class="arithmatex">\(n\)</span>-ième élément de la liste <code>l</code> et <code>b</code> est le
   <span class="arithmatex">\(n\)</span>-ième élément de la liste <code>k</code>.</p>
</li>
<li>
<p>Si ce n'est pas le cas, il retourne <code>None</code>.</p>
</li>
</ol>
<p>Exemples de résultats attendus :
<div class="highlight"><pre><span></span><code># print_combined [1;2;3] [4;5;6];;
1&lt;-&gt;4
2&lt;-&gt;5
3&lt;-&gt;6
- : unit list option = Some [(); (); ()]
# print_combined [1;2;3] [4;5;6;7];;
- : unit list option = None
</code></pre></div></p>
<h1 id="exercice-2-utilisation-de-la-monade-maybe-avec-des-listes">Exercice 2 : Utilisation de la monade Maybe avec des listes</h1>
<p>Considérons les deux fonctions suivantes qui renvoient la "tête" et la "queue"
d'une liste lorsqu'elle existe :
<div class="highlight"><pre><span></span><code>let car l = match l with
    | [] -&gt; None 
    | h :: _ -&gt; Some h

let cdr l = match l with 
    | [] -&gt; None 
    | _ :: t -&gt; Some t
</code></pre></div></p>
<p>Problème 0 : Définissez une fonction <code>cadr : 'a list -&gt; 'a option</code> qui
renvoie le deuxième élément (s'il existe) d'une liste en utilisant les
fonctions <code>car</code> et <code>cdr</code> définies ci-dessus.</p>
<p>Essayez de le faire d'au moins deux façons :</p>
<ol>
<li>
<p>Une façon en faisant explicitement du pattern matching avec des valeurs de type <code>option</code>.</p>
</li>
<li>
<p>Une autre façon en utilisant internally_dec_tree_height_4la structure monadique du type <code>option</code> (la monade Maybe).</p>
</li>
</ol>
<p>Exemples de comportements attendus :
<div class="highlight"><pre><span></span><code># cadr [1;2;3];;
- : int option = Some 2
# cadr [1];;
- : int option = None
# cadr [];;
- : &#39;a option = None
</code></pre></div></p>
<p>-Problème 1 : Faire la même chose pour une fonction <code>caddr : 'a list -&gt; 'a
option</code> qui renvoie le troisième élément d'une liste (s'il existe). </p>
<p>Exemples de comportements attendus :
<div class="highlight"><pre><span></span><code># caddr [1;2;3];;
- : int option = Some 3
# caddr [1;2];;
- : int option = None
# caddr [1];;
- : int option = None
utop # caddr [];;
- : &#39;a option = None
</code></pre></div></p>
<p>-Problème 2 : En utilisant les fonctions susmentionnées, implémentez une
fonction <code>plus_car_cadr_caddr : int list -&gt; int option</code> qui ajoute le
premier, le deuxième et le troisième élément d'une liste d'entiers (si
possible). </p>
<p>Exemples de comportements attendus :
<div class="highlight"><pre><span></span><code># plus_car_cadr_caddr [1;2;3;4];;
- : int option = Some 6
# plus_car_cadr_caddr [1;2];;
- : int option = None
# plus_car_cadr_caddr [];;
- : int option = None
</code></pre></div></p>
<p>-Problème 3 : En utilisant les fonctions susmentionnées, définissez une
fonction <code>check_dups : 'a list -&gt; bool option</code> qui retourne <code>quelque chose
de vrai</code> si une liste contient deux éléments identiques contigus et <code>quelque
chose de faux</code> si ce n'est pas le cas.</p>
<p>Exemples de comportements attendus :
<div class="highlight"><pre><span></span><code># check_dups [1;2;3];;
- : bool option = Some false
# check_dups [1;3;3];;
- : bool option = Some true
# check_dups [1];;
- : bool option = Some false
# check_dups [];;
- : bool option = Some false
</code></pre></div></p>
<p>-Problème 4 : Considérez la version monadique suivante de la fonction intégrée
<code>mod</code>, qui au lieu de produire une exception <code>Division_by_zero</code> lorsque son
second argument est zéro, retourne <code>None</code> :</p>
<div class="highlight"><pre><span></span><code>let mod_t x y = match y with
    | 0 -&gt; None 
    | _ -&gt; Some (x mod y)
</code></pre></div>
<p>Implémentez une fonction <code>maybe_mod_list : int list -&gt; int -&gt; int list
option</code> qui, lorsqu'on lui donne une liste <code>l</code> et un entier <code>m</code>, produit
une nouvelle liste dont les éléments sont ceux de <code>l</code> modulo <code>m</code> (si
possible). 
Exemples de comportements attendus : 
<div class="highlight"><pre><span></span><code># maybe_mod_list [1;2;3;4;5;6] 3;;
- : int list option = Some [1; 2; 0; 1; 2; 0]
# maybe_mod_list [1;2;3;4;5;6] 2;;
- : int list option = Some [1; 0; 1; 0; 1; 0]
# maybe_mod_list [1;2;3;4;5;6] 0;;
- : int list option = None
</code></pre></div></p>
<details class="fun-fact">
<summary>Fun-fact</summary>
<p>Les structures <code>n</code> telles que <code>n = a list</code> qui permettent de faire
correspondre des fonctions monadiques <code>f : 'a -&gt; 'b m</code> sur elles pour
produire une valeur de type <code>'b n m</code> sont appelées "traversables". Les
arbres que nous verrons dans le prochain exercice sont également
traversables !</p>
</details>
<h1 id="exercice-3-utilisation-de-la-monade-maybe-avec-les-arbres">Exercice 3 : Utilisation de la monade Maybe avec les arbres</h1>
<p>Considérons la définition suivante d'un type d'arbres binaires, quelques fonctions qui récupèrent respectivement l'enfant gauche, l'enfant droit, et la valeur d'un noeud (s'il n'est pas une feuille) et un exemple de valeur de ce type :</p>
<div class="highlight"><pre><span></span><code>type &#39;a tree = 
    | Leaf 
    | Node of &#39;a * &#39;a tree * &#39;a tree 

let left_child t = match t with
    | Leaf -&gt; None 
    | Node (_,l,_) -&gt; Some l 

let right_child t = match t with
    | Leaf -&gt; None 
    | Node (_,_,r) -&gt; Some r

let get_val t = match t with 
    | Leaf -&gt; None 
    | Node (v,_,_) -&gt; Some v 

let example_tree = 
    Node (1,
        Node (2, Leaf, Leaf),
        Node (3, 
            Node (4, Leaf, Leaf),
            Node (5, Leaf, Leaf)))
</code></pre></div>
<ul>
<li>Problème 0 : Implémentez une fonction <code>follow_path : 'a tree -&gt; string list -&gt;
  'a list option</code> qui retourne les valeurs rencontrées si l'on suit le chemin
  décrit par une liste (dont les éléments sont soit <code>l</code> qui signifie un
  virage à gauche, soit <code>r</code> qui signifie un virage à droite) dans l'arbre, en
  commençant par la racine.</li>
</ul>
<p>Exemples de comportements attendus :
<div class="highlight"><pre><span></span><code># follow_path example_tree [&quot;l&quot;;&quot;l&quot;];;
- : int list option = Some [1; 2]
# follow_path example_tree [&quot;l&quot;;&quot;l&quot;;&quot;r&quot;];;
- : int list option = None
# follow_path example_tree [&quot;r&quot;;&quot;l&quot;;&quot;l&quot;];;
- : int list option = Some [1; 3; 4]
# follow_path example_tree [&quot;r&quot;;&quot;r&quot;;&quot;l&quot;];;
- : int list option = Some [1; 3; 5]
# follow_path example_tree [&quot;r&quot;;&quot;l&quot;;&quot;l&quot;;&quot;l&quot;];;
- : int list option = None
</code></pre></div></p>
<ul>
<li>Problème 1 : implémentez une fonction <code>maybe_mod_tree : int tree -&gt; int -&gt; int tree option</code> qui, lorsqu'on lui donne un arbre avec des valeurs entières stockées à ses noeuds, renvoie un nouvel arbre dont les noeuds stockent les valeurs de l'original modulo le second argument de la fonction (s'il n'est pas zéro). </li>
</ul>
<p>Exemple de comportements attendus :
<div class="highlight"><pre><span></span><code># maybe_mod_tree example_tree 2;;
- : int tree option =
Some
 (Node (1, Node (0, Leaf, Leaf),
   Node (1, Node (0, Leaf, Leaf), Node (1, Leaf, Leaf))))
# maybe_mod_tree example_tree 3;;
- : int tree option =
Some
 (Node (1, Node (2, Leaf, Leaf),
   Node (0, Node (1, Leaf, Leaf), Node (2, Leaf, Leaf))))
# maybe_mod_tree example_tree 0;;
- : int tree option = None
</code></pre></div></p>
<h2 id="devoir-a-rendre-avant-le-29-octobre-2023-23h59-heure-de-paris">Devoir à rendre avant le 29 octobre 2023, 23h59, heure de Paris:</h2>
<p>Cet exercice concerne la monade Error, qui est étroitement liée à la monade
Maybe. Pour implémenter cette monade, nous allons utiliser la fonctionnalité
fournie par le module <code>Result</code> de la bibliothèque standard d'OCaml (voir
https://v2.ocaml.org/api/Result.html). </p>
<p>Le type <code>('a, 'e) result</code> :
<div class="highlight"><pre><span></span><code>type (&#39;a, &#39;e) t = (&#39;a, &#39;e) result = 
    | Ok of &#39;a
    | Error of &#39;e
</code></pre></div>
fournie par <code>Result</code> est paramétrée par <em>deux</em> paramètres:</p>
<ol>
<li>
<p>Le paramètre de type <code>'a</code> qui représente les valeurs des calculs réussis.</p>
</li>
<li>
<p>Le paramètre de type <code>'e</code> qui représente les valeurs retournées en cas d'erreur.</p>
</li>
</ol>
<p>Dans notre cas, nous prendrons <code>'e = string</code> car en cas d'erreur, nous voulons retourner une chaîne de caractères décrivant l'erreur.
Quant aux valeurs des calculs réussis, nous autorisons n'importe quelle valeur, donc nous gardons <code>'a</code> comme variable de 
type et ne la fixons pas.</p>
<p>Cela donne la monade suivante :</p>
<p><div class="highlight"><pre><span></span><code>module Error : Monad with type &#39;a t = (&#39;a, string) result = struct
    type &#39;a t = (&#39;a, string) result 

    let return x = Ok x

    let ( &gt;&gt;= ) m f = match m with 
        | Error s -&gt; Error s
        | Ok v -&gt; f v

end
</code></pre></div>
Remarquez la grande similarité entre <code>Error</code> et <code>Maybe</code> : en fait,
<code>Error</code> n'est différent que par le fait qu'au lieu de <code>None</code> il a <code>Error
s</code> (qui porte avec lui une chaîne décrivant l'erreur) et qu'au lieu de <code>Some
x</code> il a <code>Ok x</code>.</p>
<p>Nous utiliserons cette monade pour mettre en œuvre une structure de base de données très simple.</p>
<p>Notre base de données enregistre les étudiants et est composée de trois listes
contenant des chaînes de caractères : 
1. La première liste enregistre les noms des étudiants.</p>
<ol>
<li>
<p>La deuxième liste enregistre les noms de famille des étudiants.</p>
</li>
<li>
<p>La troisième liste enregistre les numéros des étudiants.</p>
</li>
</ol>
<p>Le <span class="arithmatex">\(k\)</span>-ième élément de chaque liste est respectivement le nom, le prénom et le
numéro d'étudiant d'un étudiant. Un exemple d'une telle base de données est 
<div class="highlight"><pre><span></span><code>let example_db = ([&quot;Alice&quot; ; &quot;Bob&quot;],[&quot;Smith&quot; ; &quot;Joe&quot;],[&quot;001&quot; ; &quot;002&quot;]) 
</code></pre></div>
qui
contient deux étudiants : "Alice Smith" avec le numéro "001" et "Bob Joe" avec
le numéro "002". Voici un exemple de base de données non valide :</p>
<p><div class="highlight"><pre><span></span><code>let example_db_invalid = ([&quot;Alice&quot; ; &quot;Bob&quot;],[&quot;Smith&quot; ; &quot;Joe&quot;],[&quot;001&quot;]) 
</code></pre></div>
car il manque le numéro d'étudiant de "Bob Joe".</p>
<p>Une base de données est valide si les trois listes ont la même taille
(c'est-à-dire si chaque étudiant a un nom, un prénom et un numéro bien
définis).</p>
<p>Voici la signature complète de la base de données :</p>
<p><div class="highlight"><pre><span></span><code>module type Database = sig 
    type database = string list * string list * string list

    val empty : database

    val is_valid : database -&gt; bool 

    val print_db : database -&gt; unit list t 

    val find_and_print : database -&gt; (string * string * string -&gt; bool) -&gt; unit list t 

    val insert_into_database : string -&gt; string -&gt; string -&gt; database -&gt; database t 

end
</code></pre></div>
(NB. le type monadique <code>'a t</code> ici est <code>('a, string) result</code>).</p>
<p>Le but de cet exercice est de fournir une implémentation de cette base de
données sous la forme d'un module appelé <code>MyDatabase</code>.</p>
<p>-Problème 0 : Implémentez la fonction <code>is_valid</code> qui vérifie si une base de
données est valide (en vérifiant que les trois listes sont de la même taille). 
<div class="highlight"><pre><span></span><code># MyDatabase.is_valid example_db;;
- : bool = true
# MyDatabase.is_valid example_db_invalid;;
- : bool = false
</code></pre></div></p>
<p>-Problème 1 : Implémentez la fonction <code>print_db</code> qui imprime le contenu de la
base de données, en une ligne par entrée, au format :
<div class="highlight"><pre><span></span><code>Nom : *n* Nom de famille : *s* Numéro : *i*
</code></pre></div>
où <code>n,s,i</code> sont le nom, le prénom et le numéro d'étudiant d'un étudiant.
Par exemple, en appliquant cette fonction à l'exemple défini précédemment, nous obtenons :
<div class="highlight"><pre><span></span><code># MyDatabase.print_db example_db;;
Name: Alice Surname: Smith Student Number: 001
Name: Bob Surname: Joe Student Number: 002
- : unit list Error.t = Ok [(); ()]
</code></pre></div></p>
<details class="hint">
<summary>Hint</summary>
<p>Vous pouvez créer des tuples de la forme <code>(n,s,i)</code> à partir des trois listes
d'une base de données en modifiant légèrement la fonction <code>comb_opt</code> que nous
avons implémentée en classe. En utilisant ces tuples, il est facile d'imprimer
la ligne souhaitée. Bien sûr, une telle fonction échoue si on lui fournit trois
listes de longueurs inégales, donc la fonction doit renvoyer <code>Error "Can't
combine lists of different sizes"</code>.</p>
</details>
<p>-Problème 2 : 
Implémentez la fonction <code>insert_into_database</code> qui prend trois chaînes de
caractères et une base de données comme arguments et (si la base de données est
valide) ajoute une nouvelle entrée à la base de données en utilisant la
première chaîne comme nom, la deuxième comme nom de famille et la troisième
comme numéro d'étudiant.</p>
<p>Si la base de données n'est pas valide, le programme renvoie <code>Error "Cannot
insert into invalid database"</code>.</p>
<p>Voici des exemples: 
<div class="highlight"><pre><span></span><code># MyDatabase.insert_into_database &quot;Carlos&quot; &quot;Jones&quot; &quot;123&quot; example_db;;
- : MyDatabase.database Error.t =
Ok
 ([&quot;Carlos&quot;; &quot;Alice&quot;; &quot;Bob&quot;], [&quot;Jones&quot;; &quot;Smith&quot;; &quot;Joe&quot;], [&quot;123&quot;; &quot;001&quot;; &quot;002&quot;])
# MyDatabase.insert_into_database &quot;Carlos&quot; &quot;Jones&quot; &quot;123&quot; example_db_invalid;;
- : MyDatabase.database Error.t =
Error &quot;Cannot insert into invalid database!&quot;
</code></pre></div></p>
<p>-Problème 3 (Bonus): Implémentez la fonction <code>find_and_print</code> qui prend comme
arguments une base de données <code>b</code> et un prédicat <code>f : string * string * string -&gt;
bool</code> et affiche toutes les entrées de la base de données <code>b</code> pour lesquelles
<code>f</code> donne <code>true</code>. Par exemple :</p>
<div class="highlight"><pre><span></span><code># let find_name n = function (x,_,_) -&gt; (x = n);;
# MyDatabase.find_and_print example_db (find_name &quot;Alice&quot;);;
Name: Alice Surname: Smith Student Number: 001
- : unit list Error.t = Ok [()]
# MyDatabase.find_and_print example_db (find_name &quot;Bob&quot;);;
Name: Bob Surname: Joe Student Number: 002
- : unit list Error.t = Ok [()]
# MyDatabase.find_and_print example_db (find_name &quot;Neo&quot;);;
- : unit list Error.t = Ok []
</code></pre></div>
</section>

            </main>
        </div>
        <hr>
Site built with
<a href="https://www.mkdocs.org/">MkDocs</a>
and a slightly-modified version of
<a href="https://github.com/ntno/mkdocs-terminal">Terminal for MkDocs</a>.

</br>
Last update: September 2023 
    </div>

    
    
    
</body>

</html>